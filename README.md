# üéØ Sistema OKR Flow - Gest√£o de Objetivos e Resultados-Chave

<div align="center">

![OKR Flow Logo](https://via.placeholder.com/200x80/4F46E5/FFFFFF?text=OKR+FLOW)

**Sistema completo de gest√£o de OKRs (Objectives and Key Results) para empresas**

[![React](https://img.shields.io/badge/React-18.2.0-blue.svg)](https://reactjs.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104.1-green.svg)](https://fastapi.tiangolo.com/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue.svg)](https://www.typescriptlang.org/)
[![Supabase](https://img.shields.io/badge/Supabase-Database-green.svg)](https://supabase.com/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.3-blue.svg)](https://tailwindcss.com/)

</div>

---

## üìã √çndice

1. [Vis√£o Geral](#-vis√£o-geral)
2. [Tecnologias](#-tecnologias)
3. [Pr√©-requisitos](#-pr√©-requisitos)
4. [Configura√ß√£o do Banco de Dados](#-configura√ß√£o-do-banco-de-dados)
5. [Configura√ß√£o do Backend](#-configura√ß√£o-do-backend)
6. [Configura√ß√£o do Frontend](#-configura√ß√£o-do-frontend)
7. [Deploy em Produ√ß√£o](#-deploy-em-produ√ß√£o)
8. [Configura√ß√£o de Dom√≠nio](#-configura√ß√£o-de-dom√≠nio)
9. [Vari√°veis de Ambiente](#-vari√°veis-de-ambiente)
10. [Troubleshooting](#-troubleshooting)
11. [Suporte](#-suporte)

---

## üöÄ Vis√£o Geral

O **OKR Flow** √© um sistema completo de gest√£o de Objetivos e Resultados-Chave (OKRs) desenvolvido para empresas que desejam implementar metodologias √°geis de gest√£o estrat√©gica.

### ‚ú® Principais Funcionalidades

- **üë• Gest√£o de Usu√°rios**: Controle completo de colaboradores, gerentes e administradores
- **üéØ Gest√£o de OKRs**: Cria√ß√£o e acompanhamento de objetivos e resultados-chave
- **üìä Dashboard Analytics**: Visualiza√ß√µes avan√ßadas de progresso e performance
- **üîÑ Ciclos de OKR**: Gest√£o de trimestres/per√≠odos de OKR
- **üìà Relat√≥rios**: An√°lises detalhadas de performance individual e coletiva
- **üí≥ Sistema de Assinatura**: Integra√ß√£o com gateway de pagamento Asaas
- **üîê Autentica√ß√£o Segura**: Sistema robusto com controle de sess√µes
- **üì± Responsivo**: Interface otimizada para desktop e mobile

---

## üõ† Tecnologias

### Frontend
- **React 18** com TypeScript
- **Vite** para build e desenvolvimento
- **Tailwind CSS** para estiliza√ß√£o
- **React Router** para navega√ß√£o
- **Zustand** para gerenciamento de estado
- **React Hook Form** para formul√°rios
- **Recharts** para gr√°ficos e visualiza√ß√µes

### Backend
- **FastAPI** com Python 3.9+
- **Supabase** como banco de dados PostgreSQL
- **JWT** para autentica√ß√£o
- **Pydantic** para valida√ß√£o de dados
- **Uvicorn** para servidor ASGI

### Banco de Dados
- **PostgreSQL** via Supabase
- **Row Level Security (RLS)** para seguran√ßa
- **Real-time subscriptions** para atualiza√ß√µes em tempo real

---

## üìã Pr√©-requisitos

### Desenvolvimento Local
- **Node.js** 18+ 
- **Python** 3.9+
- **Git**
- Conta no **Supabase** (gratuita)
- Conta no **Asaas** (para pagamentos)

### Deploy em Produ√ß√£o
- Conta no **Vercel/Netlify** (frontend)
- Conta no **Railway/Heroku/VPS** (backend)
- **Dom√≠nio pr√≥prio** (opcional)

---

## üóÑ Configura√ß√£o do Banco de Dados

### 1. Criar Projeto no Supabase

1. Acesse [supabase.com](https://supabase.com) e crie uma conta
2. Clique em **"New Project"**
3. Escolha nome, senha e regi√£o do seu projeto
4. Aguarde a cria√ß√£o do banco (2-3 minutos)

### 2. Obter Credenciais

No dashboard do Supabase, v√° em **Settings > API**:

```
Project URL: https://seuprojectoid.supabase.co
anon key: eyJ0eXAiOiJKV1Q...
service_role key: eyJ0eXAiOiJKV1Q... (mantenha privada!)
```

### 3. Configurar Tabelas

Execute os scripts SQL na aba **SQL Editor** do Supabase:

```sql
-- Criar tabelas principais
-- (Scripts completos est√£o na pasta /database/schema.sql)
CREATE TABLE companies (...);
CREATE TABLE users (...);
CREATE TABLE objectives (...);
-- etc...
```

### 4. Configurar Row Level Security (RLS)

```sql
-- Habilitar RLS nas tabelas
ALTER TABLE users ENABLE ROW LEVEL SECURITY;
ALTER TABLE objectives ENABLE ROW LEVEL SECURITY;
-- Aplicar pol√≠ticas de seguran√ßa...
```

---

## üîß Configura√ß√£o do Backend

### 1. Clonar e Instalar Depend√™ncias

```bash
# Clonar o reposit√≥rio
git clone https://github.com/seuusuario/okr-flow.git
cd okr-flow/backend

# Criar ambiente virtual
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate     # Windows

# Instalar depend√™ncias
pip install -r requirements.txt
```

### 2. Configurar Vari√°veis de Ambiente

Crie o arquivo `.env` na pasta `backend/`:

```env
# === CONFIGURA√á√ïES OBRIGAT√ìRIAS ===

# Supabase (obter em supabase.com > Settings > API)
SUPABASE_URL=https://seuprojectoid.supabase.co
SUPABASE_KEY=eyJ0eXAiOiJKV1Q...  # anon key
SUPABASE_SERVICE_KEY=eyJ0eXAiOiJKV1Q...  # service_role key

# Servidor
ENVIRONMENT=development  # ou 'production'
HOST=localhost
PORT=8000

# === CONFIGURA√á√ïES OPCIONAIS ===

# Asaas (gateway de pagamento)
ASAAS_API_KEY=seu_api_key_asaas
ASAAS_BASE_URL=https://sandbox.asaas.com/api/v3  # sandbox
# ASAAS_BASE_URL=https://www.asaas.com/api/v3    # produ√ß√£o

# Performance
WORKERS_COUNT=1          # desenvolvimento
TIMEOUT_KEEP_ALIVE=30    # desenvolvimento
ENABLE_GZIP=false        # desenvolvimento
LOG_LEVEL=DEBUG          # desenvolvimento
```

### 3. üî• IMPORTANTE: Alterar CORS para Produ√ß√£o

**Arquivo que DEVE ser alterado:** `backend/app/main.py`

```python
# LINHA 50-57 - Configure seus dom√≠nios de produ√ß√£o
app.add_middleware(
    CORSMiddleware,
    allow_origins=["https://seudominio.com", "https://www.seudominio.com"],  # ‚Üê ALTERE AQUI
    allow_credentials=True,
    allow_methods=["GET", "POST", "PUT", "DELETE", "OPTIONS"],
    allow_headers=["*"],
)
```

**‚ö†Ô∏è Em desenvolvimento deixe como est√°:**
```python
allow_origins=["*"],  # OK para desenvolvimento
```

**‚úÖ Em produ√ß√£o DEVE mudar para:**
```python
allow_origins=["https://seudominio.com", "https://www.seudominio.com"],  # Seus dom√≠nios reais
```

### 4. Testar Localmente

```bash
# Iniciar servidor de desenvolvimento
python start_server.py

# Ou com auto-reload
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 5. Verificar API

Acesse: `http://localhost:8000/docs` para ver a documenta√ß√£o autom√°tica da API.

---

## üíª Configura√ß√£o do Frontend

### 1. Instalar Depend√™ncias

```bash
cd frontend
npm install
# ou
yarn install
```

### 2. Configurar Vari√°veis de Ambiente

Crie o arquivo `.env` na pasta `frontend/`:

```env
# === DESENVOLVIMENTO ===
VITE_API_URL=http://localhost:8000
VITE_ENVIRONMENT=development

# === PRODU√á√ÉO ===
# VITE_API_URL=https://sua-api.railway.app
# VITE_ENVIRONMENT=production

# === SUPABASE (opcional para features adicionais) ===
VITE_SUPABASE_URL=https://seuprojectoid.supabase.co
VITE_SUPABASE_ANON_KEY=eyJ0eXAiOiJKV1Q...

# === ANALYTICS (opcional) ===
# VITE_GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
```

### 3. üî• IMPORTANTE: Configurar URL da API para Produ√ß√£o

**Arquivo que configura a conex√£o:** `frontend/src/lib/api.ts`

```typescript
// LINHA 10 - URL base da API
const BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:8000';
```

**üí° Como funciona:**
- **Desenvolvimento**: Usa `http://localhost:8000` (backend local)
- **Produ√ß√£o**: Usa `VITE_API_URL` do arquivo `.env`

**‚úÖ Para produ√ß√£o, defina no `.env`:**
```env
VITE_API_URL=https://sua-api.railway.app  # Sua URL do Railway
# ou
VITE_API_URL=https://api.seudominio.com   # Seu dom√≠nio pr√≥prio
```

### 4. Testar Localmente

```bash
# Iniciar servidor de desenvolvimento
npm run dev
# ou
yarn dev

# Acesse: http://localhost:5173
```

### 5. Build para Produ√ß√£o

```bash
# Criar build otimizado
npm run build
# ou
yarn build
```

---

## üöÄ Deploy em Produ√ß√£o

### üñ• Deploy do Backend

#### Op√ß√£o 1: Railway (Recomendado)

1. **Criar conta em [railway.app](https://railway.app)**
2. **Conectar reposit√≥rio GitHub**
3. **Configurar vari√°veis de ambiente**:
   ```
   SUPABASE_URL=https://seuprojectoid.supabase.co
   SUPABASE_KEY=eyJ0eXAiOiJKV1Q...
   SUPABASE_SERVICE_KEY=eyJ0eXAiOiJKV1Q...
   ENVIRONMENT=production
   WORKERS_COUNT=4
   TIMEOUT_KEEP_ALIVE=65
   ENABLE_GZIP=true
   LOG_LEVEL=WARNING
   ```
4. **Deploy autom√°tico** ser√° feito a cada commit

#### Op√ß√£o 2: Heroku

```bash
# Instalar Heroku CLI
# Criar app
heroku create seu-okr-api

# Configurar vari√°veis
heroku config:set SUPABASE_URL=https://seuprojectoid.supabase.co
heroku config:set SUPABASE_KEY=eyJ0eXAiOiJKV1Q...
heroku config:set SUPABASE_SERVICE_KEY=eyJ0eXAiOiJKV1Q...
heroku config:set ENVIRONMENT=production

# Deploy
git push heroku main
```

#### Op√ß√£o 3: VPS/Servidor Pr√≥prio

```bash
# No servidor
git clone https://github.com/seuusuario/okr-flow.git
cd okr-flow/backend

# Configurar ambiente
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# Configurar .env com suas credenciais

# Usar PM2 ou systemd para manter rodando
pm2 start "python start_server.py" --name okr-api

# Configurar nginx como proxy reverso
```

### üåê Deploy do Frontend

#### Op√ß√£o 1: Vercel (Recomendado)

1. **Conecte seu GitHub em [vercel.com](https://vercel.com)**
2. **Importe o projeto** selecionando a pasta `frontend`
3. **Configure vari√°veis de ambiente**:
   ```
   VITE_API_URL=https://sua-api.railway.app
   VITE_ENVIRONMENT=production
   VITE_SUPABASE_URL=https://seuprojectoid.supabase.co
   VITE_SUPABASE_ANON_KEY=eyJ0eXAiOiJKV1Q...
   ```
4. **Deploy autom√°tico** a cada commit

#### Op√ß√£o 2: Netlify

1. **Conecte GitHub em [netlify.com](https://netlify.com)**
2. **Configure build settings**:
   - Build command: `npm run build`
   - Publish directory: `dist`
3. **Adicione vari√°veis de ambiente** no painel
4. **Configure redirects** criando `public/_redirects`:
   ```
   /*    /index.html   200
   ```

---

## üåê Configura√ß√£o de Dom√≠nio

### 1. Backend (API)

#### Railway
1. V√° em **Settings > Domains**
2. Adicione seu dom√≠nio: `api.seudominio.com`
3. Configure DNS do seu provedor:
   ```
   CNAME api seuapp.railway.app
   ```

#### Heroku
```bash
heroku domains:add api.seudominio.com
```

### 2. Frontend

#### Vercel
1. **Settings > Domains**
2. Adicione: `seudominio.com` e `www.seudominio.com`
3. Configure DNS:
   ```
   CNAME www seuapp.vercel.app
   A @ 76.76.19.61
   ```

#### Netlify
1. **Site settings > Domain management**
2. **Add custom domain**
3. Configure DNS conforme instru√ß√µes

### 3. Configurar HTTPS

Tanto Vercel quanto Railway configurem HTTPS automaticamente com Let's Encrypt.

### 4. Atualizar URLs

Ap√≥s configurar dom√≠nio, atualize as vari√°veis:

```env
# Frontend
VITE_API_URL=https://api.seudominio.com

# Backend (CORS)
ALLOWED_ORIGINS=https://seudominio.com,https://www.seudominio.com
```

---

## ‚öôÔ∏è Vari√°veis de Ambiente

### üîß Backend (.env)

| Vari√°vel | Obrigat√≥ria | Descri√ß√£o | Exemplo |
|----------|-------------|-----------|---------|
| `SUPABASE_URL` | ‚úÖ | URL do projeto Supabase | `https://abc123.supabase.co` |
| `SUPABASE_KEY` | ‚úÖ | Chave anon do Supabase | `eyJ0eXAiOiJKV1Q...` |
| `SUPABASE_SERVICE_KEY` | ‚úÖ | Chave service_role do Supabase | `eyJ0eXAiOiJKV1Q...` |
| `ENVIRONMENT` | ‚úÖ | Ambiente (development/production) | `production` |
| `HOST` | ‚ùå | Host do servidor | `0.0.0.0` |
| `PORT` | ‚ùå | Porta do servidor | `8000` |
| `WORKERS_COUNT` | ‚ùå | N√∫mero de workers | `4` |
| `TIMEOUT_KEEP_ALIVE` | ‚ùå | Timeout em segundos | `65` |
| `ENABLE_GZIP` | ‚ùå | Habilitar compress√£o | `true` |
| `LOG_LEVEL` | ‚ùå | N√≠vel de log | `WARNING` |
| `ASAAS_API_KEY` | ‚ùå | Chave API do Asaas | `$aact_...` |
| `ASAAS_BASE_URL` | ‚ùå | URL base do Asaas | `https://www.asaas.com/api/v3` |

### üé® Frontend (.env)

| Vari√°vel | Obrigat√≥ria | Descri√ß√£o | Exemplo |
|----------|-------------|-----------|---------|
| `VITE_API_URL` | ‚úÖ | URL da API backend | `https://api.seudominio.com` |
| `VITE_ENVIRONMENT` | ‚úÖ | Ambiente | `production` |
| `VITE_SUPABASE_URL` | ‚ùå | URL do Supabase | `https://abc123.supabase.co` |
| `VITE_SUPABASE_ANON_KEY` | ‚ùå | Chave anon do Supabase | `eyJ0eXAiOiJKV1Q...` |

---

## üîß Troubleshooting

### ‚ùå Problemas Comuns

#### 1. Erro de CORS
```
Access to fetch at 'API_URL' from origin 'FRONTEND_URL' has been blocked by CORS policy
```

**Solu√ß√£o**: Configure CORS no backend:
```python
# backend/app/main.py
app.add_middleware(
    CORSMiddleware,
    allow_origins=["https://seudominio.com"],  # Adicione seu dom√≠nio
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

#### 2. Erro de Autentica√ß√£o Supabase
```
Invalid JWT: signature verification failed
```

**Solu√ß√£o**: Verifique se as chaves do Supabase est√£o corretas:
```bash
# Teste no terminal
curl -H "apikey: SUA_CHAVE_ANON" https://seuprojectoid.supabase.co/rest/v1/
```

#### 3. Erro 500 no Backend
```
Internal Server Error
```

**Solu√ß√£o**: Verifique logs do servidor:
```bash
# Railway
railway logs
# Heroku  
heroku logs --tail
# PM2
pm2 logs okr-api
```

#### 4. Frontend n√£o carrega
```
Vite dev server not found
```

**Solu√ß√£o**: Verifique se as depend√™ncias est√£o instaladas:
```bash
cd frontend
rm -rf node_modules package-lock.json
npm install
npm run build
```

### üîç Verifica√ß√µes de Sa√∫de

#### Backend
```bash
# Verificar se API est√° respondendo
curl https://sua-api.railway.app/health

# Verificar documenta√ß√£o
curl https://sua-api.railway.app/docs
```

#### Frontend
```bash
# Build local para testar
npm run build
npm run preview
```

#### Banco de Dados
```sql
-- No Supabase SQL Editor
SELECT COUNT(*) FROM users;
SELECT COUNT(*) FROM companies;
```

---

## üìä Monitoramento

### 1. Logs do Sistema

#### Backend (Railway)
```bash
railway logs --follow
```

#### Frontend (Vercel)
- Acesse **Functions** no dashboard
- Verifique **Real-time logs**

### 2. M√©tricas de Performance

#### Supabase
- **Dashboard > Reports** para m√©tricas do banco
- **Dashboard > Logs** para queries SQL

#### Vercel Analytics
- Adicione `@vercel/analytics` para m√©tricas de frontend
- Configure no dashboard **Analytics**

---

## üîê Seguran√ßa

### 1. Configura√ß√µes Obrigat√≥rias

```env
# Nunca exponha service_role key no frontend
SUPABASE_SERVICE_KEY=mantenhaprivada

# Use HTTPS em produ√ß√£o
VITE_API_URL=https://api.seudominio.com

# Configure CORS restritivo
ALLOWED_ORIGINS=https://seudominio.com
```

### 2. Boas Pr√°ticas

- ‚úÖ **Sempre use HTTPS** em produ√ß√£o
- ‚úÖ **Mantenha depend√™ncias atualizadas**
- ‚úÖ **Configure Row Level Security** no Supabase
- ‚úÖ **Use vari√°veis de ambiente** para credenciais
- ‚úÖ **Monitore logs** regularmente
- ‚ùå **Nunca comite** arquivos `.env`
- ‚ùå **Nunca exponha** service_role keys

---

## üìà Escalabilidade

### 1. Performance

#### Backend
```env
# Produ√ß√£o - Railway/Heroku
WORKERS_COUNT=4
TIMEOUT_KEEP_ALIVE=65
ENABLE_GZIP=true
LOG_LEVEL=WARNING
```

#### Frontend
```typescript
// Lazy loading de componentes
const Dashboard = lazy(() => import('./pages/Dashboard'));

// Code splitting por rota
const router = createBrowserRouter([
  {
    path: "/dashboard",
    element: <Suspense fallback={<Loading />}><Dashboard /></Suspense>
  }
]);
```

### 2. Cache

#### Backend
```python
# Cache de queries frequentes
@lru_cache(maxsize=100)
def get_user_objectives(user_id: str):
    # Implementation...
```

#### Frontend
```typescript
// React Query para cache de API
const { data, isLoading } = useQuery(
  ['objectives', userId],
  () => api.get(`/objectives/${userId}`),
  { staleTime: 5 * 60 * 1000 } // 5 minutos
);
```

---

## üÜò Suporte

### üìß Contato
- **Email**: suporte@seudominio.com
- **WhatsApp**: +55 (11) 99999-9999
- **Discord**: [Link do servidor]

### üìö Recursos
- **Documenta√ß√£o T√©cnica**: `/docs` na API
- **V√≠deos Tutoriais**: [Link do YouTube]
- **Base de Conhecimento**: [Link da KB]

### üêõ Reportar Bugs
1. Acesse **Issues** no GitHub
2. Use o template de bug report
3. Inclua logs e passos para reproduzir

### üí° Sugest√µes
- Abra uma **Feature Request** no GitHub
- Participe das **discuss√µes** da comunidade

---

## üìÑ Licen√ßa

Este software √© licenciado sob os termos acordados na compra. 

**¬© 2024 OKR Flow. Todos os direitos reservados.**

---

<div align="center">

**üéØ OKR Flow - Transforme objetivos em resultados**

[üåê Website](https://seudominio.com) ‚Ä¢ [üìß Suporte](mailto:suporte@seudominio.com) ‚Ä¢ [üì± WhatsApp](https://wa.me/5511999999999)

---

*Desenvolvido com ‚ù§Ô∏è para empresas que buscam excel√™ncia*

</div>
